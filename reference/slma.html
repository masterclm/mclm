<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function conducts a stable lexical marker analysis."><title>Stable lexical marker analysis — slma • mclm</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><link href="../deps/Poppins-0.4.2/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.2/font.css" rel="stylesheet"><link href="../deps/Raleway-0.4.2/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Stable lexical marker analysis — slma"><meta property="og:description" content="This function conducts a stable lexical marker analysis."><meta property="og:image" content="https://montesmariana.github.io/mclm/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mclm</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.2.5</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/montesmariana/mclm/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Stable lexical marker analysis</h1>
      <small class="dont-index">Source: <a href="https://github.com/montesmariana/mclm/blob/HEAD/R/slma.R" class="external-link"><code>R/slma.R</code></a></small>
      <div class="d-none name"><code>slma.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function conducts a stable lexical marker analysis.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">slma</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">y</span>,</span>
<span>  file_encoding <span class="op">=</span> <span class="st">"UTF-8"</span>,</span>
<span>  sig_cutoff <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Chisquare.html" class="external-link">qchisq</a></span><span class="op">(</span><span class="fl">0.95</span>, df <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  small_pos <span class="op">=</span> <span class="fl">1e-05</span>,</span>
<span>  keep_intermediate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  min_rank <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  max_rank <span class="op">=</span> <span class="fl">5000</span>,</span>
<span>  keeplist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stoplist <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ngram_size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_skip <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  ngram_sep <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  ngram_n_open <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  ngram_open <span class="op">=</span> <span class="st">"[]"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x, y</dt>
<dd><p>Character vector or <code><a href="fnames.html">fnames</a></code> object with filenames for the two
sets of documents.</p></dd>


<dt>file_encoding</dt>
<dd><p>Encoding of all the files to read.</p></dd>


<dt>sig_cutoff</dt>
<dd><p>Numeric value indicating the cutoff value for 'significance
in the stable lexical marker analysis. The default value is <code>qchist(.95, df = 1)</code>,
which is about 3.84.</p></dd>


<dt>small_pos</dt>
<dd><p>Alternative (but sometimes inferior) approach to dealing with
zero frequencies, compared to <code>haldane</code>. The argument <code>small_pos</code>
only applies when <code>haldane</code> is set to <code>FALSE</code>.
(See the Details section.)</p>
<p>If <code>haldane</code> is <code>FALSE</code>, and there is at least one zero frequency
in a contingency table, adding small positive values to the zero frequency
cells is done systematically for all measures calculated for that table,
not just for measures that need this to be done.</p></dd>


<dt>keep_intermediate</dt>
<dd><p>Logical. If <code>TRUE</code>, results from intermediate
calculations are kept in the output as the "intermediate" element. This is
necessary if you want to inspect the object with the <code><a href="details.html">details()</a></code> method.</p></dd>


<dt>verbose</dt>
<dd><p>Logical. Whether progress should be printed to the console
during analysis.</p></dd>


<dt>min_rank, max_rank</dt>
<dd><p>Minimum and maximum frequency rank in the first
corpus (<code>x</code>) of the items to take into consideration as candidate stable
markers. Only tokens or token n-grams with a frequency rank greater than or
equal to <code>min_rank</code> and lower than or equal to <code>max_rank</code> will be included.</p></dd>


<dt>keeplist</dt>
<dd><p>List of types that must certainly be included in the list of
candidate markers regardless of their frequency rank and of <code>stoplist</code>.</p></dd>


<dt>stoplist</dt>
<dd><p>List of types that must not be included in the list of candidate
markers, although, if a type is included in <code>keeplist</code>, its inclusion in
<code>stoplist</code> is disregarded.</p></dd>


<dt>ngram_size</dt>
<dd><p>Argument in support of ngrams/skipgrams (see also <code>max_skip</code>).</p>
<p>If one wants to identify individual tokens, the value of <code>ngram_size</code>
should be <code>NULL</code> or <code>1</code>. If one wants to retrieve
token ngrams/skipgrams, <code>ngram_size</code> should be an integer indicating
the size of the ngrams/skipgrams. E.g. <code>2</code> for bigrams, or <code>3</code> for
trigrams, etc.</p></dd>


<dt>max_skip</dt>
<dd><p>Argument in support of skipgrams. This argument is ignored if
<code>ngram_size</code> is <code>NULL</code> or is <code>1</code>.</p>
<p>If <code>ngram_size</code> is <code>2</code> or higher, and <code>max_skip</code>
is <code>0</code>, then regular ngrams are being retrieved (albeit that they
may contain open slots; see <code>ngram_n_open</code>).</p>
<p>If <code>ngram_size</code> is <code>2</code> or higher, and <code>max_skip</code>
is <code>1</code> or higher, then skipgrams are being retrieved (which in the
current implementation cannot contain open slots; see <code>ngram_n_open</code>).</p>
<p>For instance, if <code>ngram_size</code> is <code>3</code> and <code>max_skip</code> is
<code>2</code>, then 2-skip trigrams are being retrieved.
Or if <code>ngram_size</code> is <code>5</code> and <code>max_skip</code> is
<code>3</code>, then 3-skip 5-grams are being retrieved.</p></dd>


<dt>ngram_sep</dt>
<dd><p>Character vector of length 1 containing the string that is used to
separate/link tokens in the representation of ngrams/skipgrams
in the output of this function.</p></dd>


<dt>ngram_n_open</dt>
<dd><p>If <code>ngram_size</code> is <code>2</code> or higher, and moreover
<code>ngram_n_open</code> is a number higher than <code>0</code>, then
ngrams with 'open slots' in them are retrieved. These
ngrams with 'open slots' are generalisations of fully lexically specific
ngrams (with the generalisation being that one or more of the items
in the ngram are replaced by a notation that stands for 'any arbitrary token').</p>
<p>For instance, if <code>ngram_size</code> is <code>4</code> and <code>ngram_n_open</code> is
<code>1</code>, and if moreover the input contains a
4-gram <code>"it_is_widely_accepted"</code>, then the output will contain
all modifications of <code>"it_is_widely_accepted"</code> in which one (since
<code>ngram_n_open</code> is <code>1</code>) of the items in this n-gram is
replaced by an open slot. The first and the last item inside
an ngram are never turned into an open slot; only the items in between
are candidates for being turned into open slots. Therefore, in the
example, the output will contain <code>"it_[]_widely_accepted"</code> and
<code>"it_is_[]_accepted"</code>.</p>
<p>As a second example, if <code>ngram_size</code> is <code>5</code> and
<code>ngram_n_open</code> is <code>2</code>, and if moreover the input contains a
5-gram <code>"it_is_widely_accepted_that"</code>, then the output will contain
<code>"it_[]_[]_accepted_that"</code>, <code>"it_[]_widely_[]_that"</code>, and
<code>"it_is_[]_[]_that"</code>.</p></dd>


<dt>ngram_open</dt>
<dd><p>Character string used to represent open slots in ngrams in the
output of this function.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An object of class <code>slma</code>, which is a named list with at least the following
elements:</p><ul><li><p>A <code>scores</code> dataframe with information about the stability of the chosen
lexical items. (See below.)</p></li>
<li><p>An <code>intermediate</code> list with a register of intermediate values if
<code>keep_intermediate</code> was <code>TRUE</code>.</p></li>
<li><p>Named items registering the values of the arguments with the same name,
namely <code>sig_cutoff</code>, <code>small_pos</code>, <code>x</code>, and <code>y</code>.</p></li>
</ul><p>The <code>slma</code> object has <code><a href="as_data_frame.html">as_data_frame()</a></code> and <code><a href="mclm_print.html">print</a></code> methods
as well as an ad-hoc <code><a href="details.html">details()</a></code> method. Note that the <code><a href="mclm_print.html">print</a></code></p>


<p>method simply prints the main dataframe.</p><div class="section">
<h3 id="contents-of-the-scores-element">Contents of the <code>scores</code> element<a class="anchor" aria-label="anchor" href="#contents-of-the-scores-element"></a></h3>


<p>The <code>scores</code> element is a dataframe of which the rows are linguistic items
for which a stable lexical marker analysis was conducted and the columns are
different 'stability measaures' and related statistics. By default, the
linguistic items are sorted by decreasing 'stability' according to the <code>S_lor</code>
measure.</p><table class="table table"><tr><td>Column</td><td>Name</td><td>Computation</td><td>Range of values</td></tr><tr><td><code>S_abs</code></td><td>Absolute stability</td><td><code>S_att</code> - <code>S_rep</code></td><td>\(-(n*m)\) -- \((n*m)\)</td></tr><tr><td><code>S_nrm</code></td><td>Normalized stability</td><td><code>S_abs</code> / \(n*m\)</td><td>-1 -- 1</td></tr><tr><td><code>S_att</code></td><td>Stability of attraction</td><td>Number of \((a,b)\) couples in which the linguistic item is a keyword for the <em>A</em>-documents</td><td>0 -- \(n*m\)</td></tr><tr><td><code>S_rep</code></td><td>Stability of repulsion</td><td>Number of \((a,b)\) couples in which the linguistic item is a keyword for the <em>B</em>-documents</td><td>0 -- \(n*m\)</td></tr><tr><td><code>S_lor</code></td><td>Log of odds ratio stability</td><td>Mean of <code>log_OR</code> across all \((a,b)\) couples but setting to 0 the value when <code>p_G</code> is larger than <code>sig_cutoff</code></td><td></td></tr></table><p><code>S_lor</code> is then computed as a fraction with as its numerator the sum of all
<code>log_OR</code> values across all \((a,b)\) couples for which <code>p_G</code> is lower than
<code>sig_cutoff</code> and as its denominator \(n*m\).
For more on <code>log_OR</code>, see the Value section on on <code><a href="assoc_scores.html">assoc_scores()</a></code>. The final
three columns on the output are meant as a tool in support of the interpretation
of the <code>log_OR</code> column. Considering all \((a,b)\) couples for which
<code>p_G</code> is smaller than <code>sig_cutoff</code>, <code>lor_min</code>, <code>lor_max</code> and <code>lor_sd</code>
are their minimum, maximum and standard deviation for each element.</p>
</div>


    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>A stable lexical marker analysis of the <em>A</em>-documents in <code>x</code> versus the <em>B</em>-documents
in <code>y</code> starts from a separate keyword analysis for all possible document couples
\((a,b)\), with <em>a</em> an <em>A</em>-document and <em>b</em> a <em>B</em>-document. If there are <em>n</em>
<em>A</em>-documents and <em>m</em> <em>B</em>-documents, then \(n*m\) keyword analyses are
conducted. The 'stability' of a linguistic item <em>x</em>, as a marker for the
collection of <em>A</em>-documents (when compared to the <em>B</em>-documents) corresponds
to the frequency and consistency with which <em>x</em> is found to be a keyword for
the <em>A</em>-documents across all aforementioend keyword analyses.</p>
<p>In any specific keyword analysis, <em>x</em> is considered a keyword for an <em>A</em>-document
if <code>G_signed</code> is positive and moreover <code>p_G</code> is less than <code>sig_cutoff</code>
(see <code><a href="assoc_scores.html">assoc_scores()</a></code> for more information on the measures). Item <em>x</em> is
considered a keyword for the <em>B</em>-document if <code>G_signed</code> is negative and moreover
<code>p_G</code> is less than <code>sig_cutoff</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">a_corp</span> <span class="op">&lt;-</span> <span class="fu"><a href="fnames.html">get_fnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"cleveland"</span>, package <span class="op">=</span> <span class="st">"mclm"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b_corp</span> <span class="op">&lt;-</span> <span class="fu"><a href="fnames.html">get_fnames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"roosevelt"</span>, package <span class="op">=</span> <span class="st">"mclm"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">slma_ex</span> <span class="op">&lt;-</span> <span class="fu">slma</span><span class="op">(</span><span class="va">a_corp</span>, <span class="va">b_corp</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> building global frequency list for x</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> building separate frequency lists for each document</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> .....</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> calculating assoc scores</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ....................</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> calculating stability measures</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> done</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Dirk Speelman, Mariana Montes.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer></div>

  

  

  </body></html>

